{% extends "base.html" %}
{% load i18n react_comments_async react_ratings wagtailcore_tags meinberlin_project_tags %}

{% block title %}{{ paragraph.name }} — {{ paragraph.chapter.project.name }} — {{ block.super }}{% endblock title %}

{% block breadcrumbs %}
    <div id="content-header">
        <nav class="breadcrumb" aria-label="{% translate 'You are here:' %}">
            <ol>
                <li><a href="{% url 'wagtail_serve' '' %}">meinBerlin</a></li>
                <li><a href="{% url 'wagtail_serve' '' %}">meinBerlin</a></li>
                <li><a href="{% url 'meinberlin_plans:plan-list' %}">{% translate 'Project Overview' %}</a></li>
                <li><a href="{{ project.get_absolute_url }}">{{ project.name|truncatechars:50 }}</a></li>
                <!-- FIXME this doesn't work, it doesn't know it's in a cluster -->
                {% if module.is_in_module_cluster %}
                    <li><a href="{{ chapter.get_absolute_url }}">{{ chapter.name|truncatechars:50 }}</a></li>
                {% endif %}
                <li class="active" aria-current="page">{{ paragraph.name|truncatechars:50 }}</li>
            </ol>
        </nav>
    </div>
{% endblock breadcrumbs %}

{% block content %}
<div id="layout-grid__area--maincontent">

    <nav>
        <ul class="u-list-reset">
            <li>
                <a href="{{ paragraph.chapter.get_absolute_url }}">
                    <i class="fa fa-arrow-left icon--color-link" aria-hidden="true"></i>
                    {% translate 'Back to chapter' %}
                </a>
            </li>
        </ul>
    </nav> 

    <article class="item-detail">
        <h1 class="item-detail__title">
            {{ paragraph.name }}
        </h1>
        <div class="item-detail__content ck-content">
            {{ paragraph.text | richtext }}
        </div>
    </article>

    {% react_comments_async paragraph %}
</div>
{% endblock content %}
