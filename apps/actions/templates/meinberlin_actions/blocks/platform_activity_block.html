{% load i18n %}

<div class="block l-center-6">
    <h3>{{ self.heading }}</h3>

    {% for activity in activities %}
        <div class="activity">
            <i class="fa fa-{{ activity.icon }} activity__icon" aria-hidden="true"></i>
            <div class="activity__main">
                <div class="activity__line">
                    {% if activity.type == 'comment' and activity.verb == 'add' %}
                        {% url 'profile' activity.actor.username as actor_url %}
                        {% blocktrans with url=actor_url name=activity.actor.username %}<a href="{{ url }}">{{ name }}</a> commented:{% endblocktrans%}
                        {{ activity.obj.comment|truncatechars_html:50 }}
                    {% elif activity.type == 'comment' and activity.verb == 'update' %}
                        {% url 'profile' activity.actor.username as actor_url %}
                        {% blocktrans with url=actor_url name=activity.actor.username %}<a href="{{ url }}">{{ name }}</a> updated comment:{% endblocktrans%}
                        {{ activity.obj.comment|truncatechars_html:50 }}
                    {% elif activity.type == 'item' and activity.verb == 'add' %}
                        {% url 'profile' activity.actor.username as actor_url %}
                        {% blocktrans with url=actor_url name=activity.actor.username %}<a href="{{ url }}">{{ name }}</a> added a new item{% endblocktrans%}
                    {% elif activity.type == 'item' and activity.verb == 'update' %}
                        {% url 'profile' activity.actor.username as actor_url %}
                        {% blocktrans with url=actor_url name=activity.actor.username %}<a href="{{ url }}">{{ name }}</a> updated an item{% endblocktrans%}
                    {% elif activity.type == 'phase' and activity.verb == 'schedule' %}
                        {% trans "Participation will be over soon" %}
                    {% else %}
                        {{ activity }}
                    {% endif %}
                </div>
                <div class="activity__line">
                    {% url 'project-detail' activity.project.slug as project_url%}
                    {% blocktrans with url=project_url name=activity.project.name %}on <a href="{{ url }}">{{ name }}</a>{% endblocktrans %}
                </div>
                <div class="activity__date">{{ activity.timestamp|date:'d.m.Y' }}</div>
            </div>
        </div>
    {% endfor %}
</div>
