{% load i18n %}
{% load static %}

{% if item.district %}
<div class="storefront__item storefront__district tile__md">
    <h2 class="storefront__district-text">{% blocktrans with district=item.district %}What is happening in <strong>{{ district }}</strong>?{% endblocktrans %}</h2>
    <a class="btn" href="{% url 'project-list' %}?administrative_district={{ item.district.pk }}">
        {% blocktrans count counter=item.district_project_count %}display {{ counter }} project{% plural %}display {{ counter }} projects{% endblocktrans %}</a>
</div>
{% elif item.project and not item.quote %}
<div class="storefront__item storefront__proj tile__md">
    {% if item.project.days_left < 3 %}
    <div>
      <div class="storefront__ending-icon">
        <img src="{% static 'images/icon_notification@2x.png' %}" alt="" />
      </div>
      <div class="storefront__ending-icon-spacer"></div>
    </div>
    {% else %}
    <div class="list-item__stats">
        <!-- can't count comments on project level -->
        <!--<span title="Kommentare" class="list-item__comments"><i class="far fa-comment" aria-label="Kommentare"></i>234</span>-->
    </div>
    <div class="item-detail__labels">
         {% if item.project.topic %}
        <span class="label label--secondary">{{ item.project.get_topic_display }}</span>
        {% endif %}
    </div>
    {% endif %}
    <p class="storefront__sm-text">{% if item.project.administrative_district %}{{ item.project.administrative_district }}{% endif %}</p>
    <a href="{% url 'project-detail' item.project.slug %}"><h2 class="storefront__proj-text">{{ item.project.name }}</h2></a>
    {% if item.project.active_phase %}
    <div class="status-item__position-storefront status__active">
        <div class="status-bar__active">
            <span class="status-bar__active-fill" style="width:{{ item.project.active_phase_progress }}%"></span>
        </div>
        {% if item.project.days_left > 3 %}
        <span class="status-bar__status"><i class="fas fa-clock"></i>{% blocktrans count days=item.project.days_left %} {{ days }} more day {% plural %} {{ days }} more days{% endblocktrans %}</span>
        {% else %}
        <span class="status-bar__status"><i class="fas fa-clock"></i>{% blocktrans count days=item.project.days_left %} {{ days }} more day {% plural %} more days{% endblocktrans %}</span>
        {% endif %}
    </div>

    {% elif item.project.future_phases %}
    <div class="status-item__position-storefront status__future">
      <span class="status-bar__status"><i class="fas fa-clock" ></i>{% blocktrans with date=item.project.future_phases.first.start_date.date|date:"d.m.Y" %} Participation: from {{ date }} possible{% endblocktrans %}</span>
    </div>

    {% elif item.project.past_phases %}
    <div class="status-item__position-storefront status-bar__past">
      {% blocktrans %}Participation ended. Read result.{% endblocktrans %}
    </div>
    {% endif %}
</div>
{% elif item.project and item.quote %}
<div class="storefront__item storefront__proj-quote tile__md">
    <!-- can't count comments on project level -->
    <!--<div class="list-item__stats"><span title="Kommentare" class="list-item__comments"><i class="far fa-comment" aria-label="Kommentare"></i>5</span></div>-->
    <blockquote class="storefront__quote-text">
        „{{ item.quote|truncatechars:150 }}“
    </blockquote>
    <a href="{% url 'project-detail' item.project.slug %}">{% blocktrans with name=item.project.name|truncatechars:60 %} What is your opinion on this: {{ name }}?{% endblocktrans %}</a>
</div>
{% elif not item.project and item.quote %}
<div class="storefront__item storefront__quote tile__md">
    <blockquote class="storefront__quote-text">„{{ item.quote|truncatechars:135 }}“</blockquote>
</div>
{% endif %}
