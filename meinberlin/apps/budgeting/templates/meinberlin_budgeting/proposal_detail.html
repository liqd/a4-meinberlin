{% extends "meinberlin_mapideas/mapidea_detail.html" %}
{% load rules i18n humanize contrib_tags react_proposals_vote static %}

{% block extra_js %}
    <script type="text/javascript" src="{% static 'vote_button.js' %}"></script>
    {{ block.super }}
{% endblock %}

{% block additional_labels %}
    {{ block.super }}
    <span class="label label--big test">{{ proposal.budget|intcomma }}â‚¬</span>
{% endblock %}

{% block vote_button %}
{% comment %}
    FIXME: differentiating 2 and 3 phase buergerhaushalt by just counting the phases
           should be changed once we have module types
{% endcomment %}
{% if module.phases.count == 3 %}
    {% has_perm 'meinberlin_budgeting.vote_proposal' request.user proposal as vote_allowed %}
    {% if vote_allowed %}
    <div class="l-center-6 u-bottom-divider">
        {% react_proposals_vote view.module proposal %}
    </div>
    {% endif %}
{% endif %}
{% endblock %}
