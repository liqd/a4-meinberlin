"use strict";var BO={init:{}},formValidate=(jQuery(function(e){for(var t in BO.init)"object"==typeof module&&"object"==typeof module.exports&&(e=jQuery=require("jquery")),BO.init[t].apply(window,[e])}),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports=BO,global.BO=BO):(window.BO=BO,"function"==typeof define&&define.amd&&define("bo",[],function(){return BO})),String.prototype.quotehtml||(String.prototype.quotehtml=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return(""+this).replace(/[&<>"'\/]/g,function(e){return t[e]})}),!function(d){d.fn.rwdImageMaps=function(){var e=this;return d(window).resize(function(){e.each(function(){var t;void 0!==d(this).attr("usemap")&&(t=d(this),d("<img />").load(function(){var r=t.attr("width"),o=t.attr("height"),i=(r&&o||((e=new Image).src=t.attr("src"),r=r||e.width,o=o||e.height),t.width()/100),l=t.height()/100,e=t.attr("usemap").replace("#",""),s="coords";d('map[name="'+e+'"]').find("area").each(function(){for(var e=d(this),t=(e.data(s)||e.data(s,e.attr(s)),e.data(s).split(",")),a=new Array(t.length),n=0;n<a.length;++n)a[n]=n%2==0?parseInt(t[n]/r*100*i):parseInt(t[n]/o*100*l);e.attr(s,a.toString())})}).attr("src",t.attr("src")))})}).trigger("resize"),this}}(jQuery),!function(t){t(function(){var e;t.support.transition=(e=function(){var e,t=document.createElement("bootstrap"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in a)if(void 0!==t.style[e])return a[e]}())&&{end:e}})}(window.jQuery),!function(i){function n(e){this.element=i(e)}n.prototype={constructor:n,show:function(){var e,t,a=this.element,n=a.closest("ul:not(.dropdown-menu)"),r=(r=a.attr("data-target"))||(r=a.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"");a.parent("li").hasClass("active")||(e=n.find(".active:last a")[0],t=i.Event("show",{relatedTarget:e}),a.trigger(t),t.isDefaultPrevented())||(t=i(r),this.activate(a.parent("li"),n),this.activate(t,t.parent(),function(){a.trigger({type:"shown",relatedTarget:e})}))},activate:function(e,t,a){var n=t.find("> .active"),r=a&&i.support.transition&&n.hasClass("fade");function o(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),a&&a()}r?n.one(i.support.transition.end,o):o(),n.removeClass("in")}};var e=i.fn.tab;i.fn.tab=function(a){return this.each(function(){var e=i(this),t=e.data("tab");t||e.data("tab",t=new n(this)),"string"==typeof a&&t[a]()})},i.fn.tab.Constructor=n,i.fn.tab.noConflict=function(){return i.fn.tab=e,this},i(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),i(this).tab("show")})}(window.jQuery),!function(o){function r(e,t){this.$element=o(e),this.options=o.extend({},o.fn.collapse.defaults,t),this.options.parent&&(this.$parent=o(this.options.parent)),this.options.toggle&&this.toggle()}r.prototype={constructor:r,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var e,t,a,n;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),t=o.camelCase(["scroll",e].join("-")),(a=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&a.length){if((n=a.data("collapse"))&&n.transitioning)return;a.collapse("hide"),n||a.data("collapse",null)}this.$element[e](0),this.transition("addClass",o.Event("show"),"shown"),o.support.transition&&this.$element[e](this.$element[0][t])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",o.Event("hide"),"hidden"),this.$element[e](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(e,t,a){function n(){"show"==t.type&&r.reset(),r.transitioning=0,r.$element.trigger(a)}var r=this;this.$element.trigger(t),t.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),o.support.transition&&this.$element.hasClass("collapse")?this.$element.one(o.support.transition.end,n):n())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var e=o.fn.collapse;o.fn.collapse=function(n){return this.each(function(){var e=o(this),t=e.data("collapse"),a=o.extend({},o.fn.collapse.defaults,e.data(),"object"==typeof n&&n);t||e.data("collapse",t=new r(this,a)),"string"==typeof n&&t[n]()})},o.fn.collapse.defaults={toggle:!0},o.fn.collapse.Constructor=r,o.fn.collapse.noConflict=function(){return o.fn.collapse=e,this},o(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var t=o(this),e=t.attr("data-target")||e.preventDefault()||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),a=o(e).data("collapse")?"toggle":t.data();t[o(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),o(e).collapse(a)})}(window.jQuery),BO.init.translate=function(e){var t=jQuery("html").attr("lang");BO.translate.setLocale(t)},BO.translate=function(){var t={de:{msgidFORMBITTEKONTROLLIEREN:'Bitte kontrollieren Sie erst Ihre Eingaben und klicken dann auf "Formular absenden" am Ende der Seite. Um Ihre Eingaben zu korrigieren, klicken Sie auf "Eingaben korrigieren".',msgidFORMACHTUNG:"Achtung, Ihre Angaben wurden noch nicht abgeschickt."},en:{Eingabefeld:"input field",EINGABEFELD:"INPUT field",Selectfeld:"select field",SELECTFELD:"SELECT field","Dieses Feld muss zwingend ausgefüllt sein.":"This field is obligatory.","Dieses Feld darf nicht leer sein.":"This field should be not empty.","Bitte überprüfen Sie diese Eingabe(n)":"Please check your answers","Das Formular kann nicht verarbeitet werden! Bitte korrigieren Sie die hervorgehobenen Felder.":"Form cannot be processed. Please check the highlighted fields.",Zeichen:"chars","LEER/NICHTS AUSGEWÄHLT":"EMPTY/NOTHING SELECTED","Eingaben korrigieren":"Re-Edit","Formular absenden":"Send form",Hinweis:"Attention",msgidFORMBITTEKONTROLLIEREN:'Please control your input data. Then press button "Send form" at end of page. To correct your input data, please use the button "Re-Edit".',msgidFORMACHTUNG:"Your input has not been sent yet."}};return{translate:function(e){return t[this.locale]&&t[this.locale][e]||e},setLocale:function(e){e&&(this.locale=e)}}}(jQuery),BO.datawrapper=BO.datawrapper||{},BO.datawrapper={datawrapper_accept:function(e){var t=$("#datawrapper"+e),a=t.data("markup");t.html(a),$("#tabbable"+e).focus()}},BO.init.datepicker=function(r){void 0!==jQuery.fn.datepicker&&(jQuery(function(e){e.datepicker.regional.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.de)}),r(".datepicker").datepicker({dateFormat:"dd.mm.yy",showButtonPanel:!0,changeYear:!0}),r(".limiteddatepicker").each(function(e,t){var a=r(this).data("datelimitfrom"),n=r(this).data("datelimitto"),a={minDate:null,maxDate:null,dateFormat:"dd.mm.yy",changeYear:!0,yearRange:String(a+" : "+n),showButtonPanel:!0};r(this).datepicker(a)}))},{msg_error_general:"Das Formular kann nicht verarbeitet werden! Bitte korrigieren Sie die hervorgehobenen Felder.",msg_error_required:"Dieses Feld darf nicht leer sein.",msg_error_checked:"Bitte suchen Sie eine Option aus.",msg_error_check:"Bitte haken Sie dieses Feld an.",msg_error_pattern:"Diese Angaben können nicht verarbeitet werden.",msg_error_kontakt:"Ihre Absenderangaben fehlen, obwohl Sie eine Antwort wünschen.",msg_error_emval:"Beide E-Mail-Adressen müssen identisch sein.",validate:function(e,t){var a=this,n=!1,r=($('button[id^="forth_"]').each(function(e){n=!0}),n||this.removeAllErrorMessages(),!0);return void 0!==e&&void 0!==e.action&&"string"!=typeof e.action&&e.action.remove(),$(e).find("input, select, textarea").map(function(){r=("radio"!=$(this).attr("type")&&"checkbox"!=$(this).attr("type")?a.validateInput(this):a.validateCheckbox(this,e))&&r}),r=this.validateKontakt(e)&&r,this.removeErrorMessages(r,e),r||t||(window.scrollTo(0,0),alert(BO.translate.translate(this.msg_error_general)),$.find(".control-group.error",function(){$("html, body").animate({scrollTop:$(".control-group.error").offset().top},0)}),$("#aural_maincontent").trigger("focus")),void 0!==e&&void 0!==e.action&&r&&"string"==typeof(t=e.getAttribute("action"))&&!/#/.test(t)&&(e.action=t+"#top"),0==e.id.indexOf("page")?window.location.href="#form_1":"string"==typeof e.id&&""!==e.id&&(window.location.href="#"+e.id),r},validateKontakt:function(e){return"Ja"!=$("input:checked[name='Antwortwunsch']").val()||!(!$("#form_email").get(0)||""==$("#form_email").val())||!(!$('input[name="Absender_Strasse"]').get(0)||""==$('input[name="Absender_Strasse"]').val()||""==$('input[name="Absender_Ort"]').val())||($("#form_email").get(0)&&this.addError($("#form_email").get(0),BO.translate.translate("Eingabefeld"),BO.translate.translate(this.msg_error_kontakt),!0),$('input[name="Absender_Strasse"]').get(0)&&(this.addError($("input[name='Absender_Strasse']").get(0),BO.translate.translate("Eingabefeld"),BO.translate.translate(this.msg_error_kontakt),!0),this.addError($("input[name='Absender_Ort']").get(0),BO.translate.translate("Eingabefeld"),BO.translate.translate(this.msg_error_kontakt),!0)),!1)},validateInput:function(e){if(!e.disabled){if(!e.checkValidity())return console&&console.log(e.id+": "+e.validationMessage),this.addError(e,BO.translate.translate("Eingabefeld"));if(e.getAttribute("data-validcontent")&&e.value){var t=e.getAttribute("data-validcontent");if(t=(t=(t=(t=t.replace("&amp;","&")).replace("&quot;",'"')).replace("&lt;","<")).replace("&gt;",">"),!RegExp("^(?:"+t+")$","i").test(e.value))return this.addError(e,BO.translate.translate("Eingabefeld"))}else if(e.className&&-1!=e.className.indexOf("required")&&(!e.value||""==e.value||/^--.*--$/.test(e.value)))return this.addError(e,BO.translate.translate("Eingabefeld"),BO.translate.translate(this.msg_error_required));if("form_emailval"==e.id&&$("#form_email").val()!=$("#form_emailval").val())return this.addError(e,BO.translate.translate("Eingabefeld"),BO.translate.translate(this.msg_error_emval),!0)}return!0},validateCheckbox:function(e,t){var a=e;if(a.disabled||!a.className||-1==a.className.indexOf("required"))return!0;for(var n=0,r=e.id;document.getElementById(r=r.replace(/_[0-9]+$/,"_"+n));){if(document.getElementById(r).checked)return!0;n++}return this.addError(a,"Selectfeld",1<n?BO.translate.translate(this.msg_error_checked):BO.translate.translate(this.msg_error_check))},addError:function(e,t,a,n){var r,o,i,l,s,d=$(e).parents(".control-group");return d&&(l=e.getAttribute("data-helptext"),r=(r=$(d).parents("fieldset"))||$(d)[0].parentNode,s=$(d).hasClass("error"),$(d).addClass("error"),$(d).children(".control-label")&&(t+=' "'+$(d).children(".control-label").text().replace(/ \*.*/g,"")+'": '),e.className&&-1!=e.className.indexOf("nomsg")||!l&&!a||(d=$(r).prev(),$(d).hasClass("formerrormessage")?s||(i="<li>",i=(i+="<strong>"+t+"</strong> ")+(!n&&l||a)+"</li>",o=$(i),$(d).find("ul").append(o)):(i='<div class="formerrormessage" id="error-'+r[0].id+'">',i=(i=(i+='<h2 class="title2">'+BO.translate.translate("Bitte überprüfen Sie diese Eingabe(n)")+":</h2>")+'<ul class="list error"><li><strong>'+t+"</strong> ")+(!n&&l||a)+"</li></ul></div>",o=$(i),$(r).before(o)))),!1},removeErrorMessages:function(e,t){e&&($(t)[0].previousSibling&&"formerrormessage"==$(t)[0].previousSibling.className&&$(t)[0].previousSibling.remove(),$(t).find(".control-group.error").removeClass("error"))},removeAllErrorMessages:function(){$(".formerrormessage").each(function(){$(this).remove()}),$(".error").each(function(){$(this).removeClass("error")})},enableElement:function(e,t){(e.disabled=t=!!t)?$(e).prop("disabled",!0).addClass("disabled"):$(e).prop("disabled",!1).removeClass("disabled")},checkDependencies:function(e,t){if(e.value)for(var a in t){var n=t[a];if(e.value==n.c){for(var r in n.e)this.enableElement(document.getElementById(n.e[r]));for(var r in n.d)this.enableElement(document.getElementById(n.d[r]),!0);return!0}}},uncheckDefault:function(e,t){var a=[];e.id==t+"__0"?(a=[],$("[id^="+t+"]").each(function(e,t){jQuery("#"+t.id).prop("checked",!1)})):$("[id^="+t+"]").each(function(e,t){$("input:checked[id="+t.id+"]").val(),$("input:checked[id="+t.id+"]").val()==$(t).val()&&a.push(t.id)}),0===a.length&&jQuery("#"+t+"__0").prop("checked",!0),1<a.length&&(jQuery("#"+t+"__0").prop("checked",!1),-1!==(e=a.indexOf(t+"__0")))&&a.splice(e,1)}}),formSummary={quotehtml:function(e,t){var a="";return e?(!t&&$(e).val()?a=$(e).val():t&&$(e).text()&&(a=$(e).text()),a.quotehtml()):""},checkit:function(e,t,a){e=document.getElementById(e);return formValidate.validate(e)?(this.changeLum("aus"),this.buildArea(t,a,0,0),$("#aural_maincontent").trigger("focus"),!0):($("#aural_maincontent").trigger("focus"),!1)},showdata:function(e){return this.buildArea(0,0,1,e),!0},buildArea:function(e,t,a,n){var r,o;"1"==a?(r=$(n),o=this.buildAreaTop(a),o=(o+=this.buildContent(r))+this.buildAreaBottom(a)):(r=$(".template-formular").find(".container2hide"),o=this.buildAreaTop("0"),n=$("#form_preview_status").val(),o=(o=(o+=this.buildContent(r))+this.buildAreaBottom())+this.buildButtons(e,t,n),"1"==n&&(o+=this.buildWarnContainer())),$(r).before(o)},buildContent:function(e){var i=this,l=$(e).hasClass("withfilter")?1:0,s="",d='<li class="row-fluid">',c='<div class="span5 cell cell-label">',u='<div class="span7 cell">',m="</div>";return $(e).find("fieldset").each(function(e,t){$(t).find(".legend").text()&&(s=(s+='<h3 class="title">')+$(t).find(".legend").text()+"</h3>"),$(this).find(".control-group")&&(s+='<ul class="list-tablelist strait list--tablelist bordered span--4">',$(this).find(".control-group").each(function(e,t){var a,n,r="",o="";(a=$(t)[0]&&void 0!==$(t)[0].children[0]&&(n=$(t)[0].children[0]).htmlFor&&""!=n.htmlFor?n.control?$(n.control):$("#"+n.htmlFor):a)&&$(a)[0]&&(r=$(a)[0].type,o=$(a)[0].defaultValue),$(t).hasClass("clearfix")?s=(s+='<p class="textile">')+$(t).find(".textile").text()+"</p>":"file"===r&&""!==o?s=(s=(s=(s=(s=s+d+c)+i.checkTitle(t))+m)+u+o)+m+"</li>":$(t).hasClass("hidden")||$(t).hasClass("formsubmit")||1==l&&i.checkContent(t)=='<p class="align-right text--disabled">'+BO.translate.translate("LEER/NICHTS AUSGEWÄHLT")+"</p>"?s+="":s=(s=(s=(s=(s=s+d+c)+i.checkTitle(t))+m+u)+i.checkContent(t))+m+"</li>"}),s+="</ul>")}),s},checkTagName:function(e){var e=$(e).find(".controls"),t="";return t="LABEL"==(t=$(e).children().get(0)?$(e).children().get(0).nodeName:t)&&(t="",$(e).children().children().get(0))?$(e).children().children().get(0).nodeName:t},checkTagType:function(e){var e=$(e).find(".controls"),t="",a="";return $(e).children().get(0)&&(t=$(e).children().get(0).type,a=$(e).children().get(0).nodeName),t="LABEL"==a&&(t="",$(e).children().children().get(0))?$(e).children().children().get(0).type:t},checkTitle:function(e){var t=String(this.checkTagName(e)),n=(String(this.checkTagType(e)),"");return $(e).find("label").text()?($(e).find("label").each(function(e,t){if(!$(this).hasClass("radio")){var a=$(this)[0].firstChild;if(n=a&&$(a).text()?formSummary.quotehtml($(a),!0):formSummary.quotehtml($(this),!0),n=$.trim(n))return!1}}),!n&&$(e).find("label")&&(n=formSummary.quotehtml($(e).find("label"),!0))):n=-1!==t.indexOf("INPUT")&&$("input",e).hasClass("form_teaser")?formSummary.quotehtml($("input",e),!1):"INPUT"==t||"TEXTAREA"==t?'<p class="align-right">'+BO.translate.translate("EINGABEFELD")+"</p>":"DIV"==t?formSummary.quotehtml($(e).find("input"),!1):'<p class="align-right">'+BO.translate.translate("SELECTFELD")+"</p>",n=$.trim(n)},checkContent:function(e){var t,a=String(this.checkTagName(e)),n=String(this.checkTagType(e)),r="",o='<p class="align-right text--disabled">'+BO.translate.translate("LEER/NICHTS AUSGEWÄHLT")+"</p>";return-1!=a.indexOf("SELECT")&&(-1!=n.indexOf("multiple")?$("select :selected",e).map(function(e,t){$(t).val().match(/^\-\-/)||(r+=formSummary.quotehtml($(t),!1)+" ")}):(r=formSummary.quotehtml($("select :selected",e),!1)).match(/^\-\-/)&&(r="")),-1!==a.indexOf("INPUT")&&(-1!==n.indexOf("text")||-1!==n.indexOf("email")||-1!==n.indexOf("date")||-1!==n.indexOf("time")||-1!==n.indexOf("number")||-1!==n.indexOf("url")?r=formSummary.quotehtml($("input",e),!1):-1!==n.indexOf("file")?""!==(r=(r=formSummary.quotehtml($("input",e),!1)).replace(/C:\\fakepath\\/i,""))&&(t=$("input",e).attr("id"),$(e).find('input[name="UPLOAD_FILENAME_'+t+'"]').val(r.replace(/C:\\fakepath\\/i,"")),$(e).find('input[name="UPLOAD_FILENAME_'+t+'"]').text(r.replace(/C:\\fakepath\\/i,""))):-1!==n.indexOf("radio")?r=formSummary.quotehtml($("input:radio:checked",e),!1):-1!==n.indexOf("checkbox")?$("input:checkbox:checked",e).map(function(e,t){r+=formSummary.quotehtml($(t),!1)+" "}):-1!==n.indexOf("password")&&$("input",e).val()&&(r="Eingabe erfolgt.")),-1!=a.indexOf("TEXTAREA")&&(r=formSummary.quotehtml($("textarea",e),!1).replace(/\\n/g,"<br />")),(r=-1===a.indexOf("DIV")||"undefined"!==n||"undefined"===$(e).find("input")[0].value||"undefined"===$(e).find("input")[0].type||!$(e).find("input")[0].checked||"checkbox"!=$(e).find("input")[0].type&&"radio"!=$(e).find("input")[0].type?r:formSummary.quotehtml($(e).find("input")[0],!1))||o},buildAreaTop:function(e){var t="";return t=(t="0"==e?(t=(t=(t+='<div class="html5-section body formsuccess">')+'<p class="block alert message"><strong>'+BO.translate.translate("Hinweis")+":</strong><br />")+"<strong>"+BO.translate.translate("msgidFORMACHTUNG")+"</strong> ")+BO.translate.translate("msgidFORMBITTEKONTROLLIEREN")+"</p>":t)+'<div class="block box-gray-light add-paperclip">'+'<span class="icon-paperclip"></span>'},buildAreaBottom:function(e){var t="</div>";return 1!=e&&(t+="</div>"),t},buildButtons:function(e,t,a){var n="",a="1"==a?"button":"submit";return n+'<div class="control-group block formbuttons">'+'<div class="controls">'+('<button type="button" class="btn link link--back pull-left" onclick="formSummary.changeLum(7);" href="#top">'+BO.translate.translate("Eingaben korrigieren")+"</button>")+('<button class="btn button pull-right" id="'+e+'" type="'+a+'">'+BO.translate.translate("Formular absenden")+"</button>")+"</div></div>"},buildWarnContainer:function(){return'<p class="formbuttons block alert alert-error message message--error"><strong>Achtung:</strong><br/>In der Dokumenten-Vorschau können keine Daten verschickt werden,<br/>aus diesem Grund ist der entsprechende "Button" funktionslos.</p>'},changeLum:function(e){"aus"==e?($(".template-formular").find(".container2hide").hide(),$(".template-formular").find(".form_polldata").hide(),$(".template-formular").find(".form-generic-alert").hide(),$(".form_help").hide()):7==e?(window.location.href="#form_1",$(".formsuccess").remove(),$(".formbuttons").remove(),$(".template-formular").find(".container2hide").show(),$(".template-formular").find(".form_polldata").show(),$(".template-formular").find(".form-generic-alert").show(),$(".form_help").show()):(window.location.href="#top",$(".formsuccess").remove(),$(".formbuttons").remove(),$(".template-formular").find(".container2hide").show(),$(".template-formular").find(".form_polldata").show(),$(".template-formular").find(".form-generic-alert").show(),$(".form_help").show(),$(".formsubmit").hide())},print:function(e){1==e?($(".formprintbutton").hide(),$(".column-right").hide(),$(".content-navigation-left").hide()):($(".column-right").show(),$(".content-navigation-left").show(),$(".formprintbutton").show())}};BO.geomap_osm_menu=function(l){var l=jQuery,t={de:{controllerTitle:"Für dieses Gebiet verfügbare Kartenschichten",closedToggleTitle:"Schichtenauswahl einblenden",openedToggleTitle:"Schichtenauswahl ausblenden",activeItemTitle:"Diese Schicht in der Karte ausblenden",inactiveItemTitle:"Diese Schicht in der Karte einblenden",listTitle:"Liste der Kartenschichten"},en:{controllerTitle:"Map layers available for this area",closedToggleTitle:"Show layer selection",openedToggleTitle:"Hide layer selection",activeItemTitle:"Hide this layer in the map",inactiveItemTitle:"Show this layer in the map",listTitle:"List of map layers"},fr:{controllerTitle:"Couches cartographiques disponibles pour cette zone",closedToggleTitle:"Afficher la sélection du calque",openedToggleTitle:"Masquer la sélection du calque",activeItemTitle:"Masquer cette couche dans la carte",inactiveItemTitle:"Afficher cette couche sur la carte",listTitle:"Liste des couches cartographiques"},it:{controllerTitle:"Livelli disponibili per questa area",closedToggleTitle:"Mostra il selettore di livelli",openedToggleTitle:"Nascondi il selettore di livelli",activeItemTitle:"Nascondi questo livello dalla mappa",inactiveItemTitle:"Mostra questo layer sulla mappa",listTitle:"Elenco dei livelli sulla mappa"},ru:{controllerTitle:"Слои карты доступны для этой области",closedToggleTitle:"Показать выбор слоя",openedToggleTitle:"Скрыть выделение слоя",activeItemTitle:"Скрыть этот слой на карте",inactiveItemTitle:"Показать этот слой на карте",listTitle:"Список слоев карты"}},a={defaultPosition:"top-right",closedToggleSymbol:"❮",openedToggleSymbol:"❯"};function n(e){this.options=l.extend(!0,{},a,e);e=l("html").attr("lang");this.i18n=t[e=e in t==!1?"de":e]}return n.prototype.onAdd=function(e){this._map=e;e=l(e.getContainer()),e.addClass("has-layer-menu-control"),e=e.find(".layer-menu-control");return(e=0===e.length?l(`<div class="layer-menu-control layer-menu-control--collapsed layer-menu--empty mapboxgl-ctrl mapboxgl-ctrl-group"
                                aria-label="${this.i18n.controllerTitle}"
                                role="region">
                            </div>`).append(`<button class="layer-menu-control_toggle justify--right" aria-expanded="true" aria-controls="layermenu1"
                                aria-label="${this.i18n.closedToggleTitle}" title="${this.i18n.closedToggleTitle}">
                            <span class="icon" aria-hidden="true">${this.options.closedToggleSymbol}</span>
                        </button>`).append(`<div class="layer-menu-inner" id="layermenu1">
                            <ul class="layer-menu-items list--clean list--ruler" aria-label="${this.i18n.listTitle}"></ul>
                        </div>`):e).on("layer-menu-control:toggle",this.toggle.bind(this)),e.find(".layer-menu-control_toggle").on("click",function(){l(this).trigger("layer-menu-control:toggle")}).click(),this._container=e.get(0)},n.prototype.toggle=function(e){var e=l(e.target).parent(".layer-menu-control").first(),t=!e.hasClass("layer-menu-control--collapsed");e.toggleClass("layer-menu-control--collapsed",t),e.find(".layer-menu-control_toggle").attr("title",t?this.i18n.closedToggleTitle:this.i18n.openedToggleTitle).attr("aria-title",t?this.i18n.closedToggleTitle:this.i18n.openedToggleTitle).find(".icon").text(t?this.options.closedToggleSymbol:this.options.openedToggleSymbol)},n.prototype.onRemove=function(e){this._container.parentNode.removeChild(this._container),this._map=void 0},n.prototype.getDefaultPosition=function(){return this.options.defaultPosition},n.prototype.addItem=function(e,t,a,n,r){var o;e.getLayer(t)?(e=l(this._container),o=a+". "+this.i18n.activeItemTitle,(o=l(`<button class="layer-menu-control_item layer-menu-control_item--active" title="${o}" aria-label="${o}" data-menu-item-id=${t}>
            <span class="text">${a||t}</span>
            ${r?`<span class="item" aria-hidden="true" style="background:${r}"></span>`:""}
        </button>`)).on("click",function(e){e.stopPropagation();e=l(e.target).closest("[data-menu-item-id]").data("menuItemId");this.toggleItem(e)}.bind(this)),l("<li></li>").append(o).appendTo(e.find(".layer-menu-items")),n||this.toggleItem(t),e.removeClass("layer-menu--empty")):console.warn("There was an attemp to add a layer menu item ("+a+") but the corresponding layer ("+t+") was not found.")},n.prototype.toggleItem=function(e){BO.geomap_osm.clear_popups();for(var t,a,n=l('[data-menu-item-id="'+e+'"]').toggleClass("layer-menu-control_item--active"),r=n.hasClass("layer-menu-control_item--active"),r=n.find(".text").text()+". "+(r?this.i18n.activeItemTitle:this.i18n.inactiveItemTitle),o=(n.attr("title",r).attr("aria-label",r),this._map.getStyle().layers),i=0;i<o.length;i++)o[i].metadata&&o[i].metadata.groupId&&!1!==(o[i].metadata&&o[i].metadata.groupId&&o[i].metadata.groupId===e)&&(t=o[i].id,a="visible"===this._map.getLayoutProperty(t,"visibility"),this._map.setLayoutProperty(t,"visibility",a?"none":"visible"));t?l(this).trigger("layer-menu-control:toggle-item",{item:t,groupId:e}):console.log("The menu item couldn't find any layer for "+t+" (group "+e+"). Please, to add a layer call `map.addLayerToGroup` instead of `map.addLayer`.")},{addControlTo:function(r,e){r._layerMenu instanceof n||(e=new n(e),r.addControl(e),r._layerMenu=e,r.hasLayerMenuControl=function(){return!!this._layerMenu},r.getLayerMenuControl=function(){return this._layerMenu},r.addLayerToGroup=function(e,t,a){var n;return e=e,(n=t).metadata=n.metadata||{},n.metadata.groupId=e||n.id,t=n,r.addLayer.call(this,t,a)})},getLayerGroup:function(e){return e.metadata.groupId}}}(jQuery),BO.init.geomap_osm=function(e){jQuery(".geomap-container.geomap-mode-osm").length&&("object"!=typeof mapboxgl?window.setTimeout("BO.init.geomap_osm(jQuery);",2e3):mapboxgl.supported()&&(jQuery(".geomap-container.geomap-mode-osm").each(function(e,t){t.geomap_osm=BO.geomap_osm.init_map(t)}),jQuery(document).on("click",".js-geomap-show-marker-at-coords",function(e){var t,a,e=jQuery(e.target).closest("[data-rel]").data();e.rel&&(a=e.rel.split(","),t=new Number(a[0]),a=new Number(a[1]),BO.geomap_osm.show_marker_at(e.mapid,t,a))})))},BO.geomap_osm=function(b){function s(n,e,t,r){var o,i=b(e).get(0).dataset,l=!0,s=(void 0!==i.layerType&&"geojson"!==i.layerType&&(l=!!(["0","1"].includes(i.layerActive)?parseInt(i.layerActive):i.layerActive)),r=t+"_layer__"+r,(e,t,a,n)=>p(e,t,a,n).then(()=>BO.geomap_osm.load_layer(e,t,a,n,l)).catch(e=>{console.error(n+" - "+e),console.error(t)}));h(i.layerSource)&&(o=()=>console.error('Unable to fetch valid GeoJSON for "'+i.layerTitle+'", from '+i.layerSource+"."),b.ajax(i.layerSource).fail(o).done((e,t,a)=>{if(200!==a.status||!e)return o();s(n,e,r,i.layerTitle)})),i.layerGeojson&&s(n,i.layerGeojson,r,i.layerTitle),b("[id^=hide-controls]").each(function(e,t){console.log("Hide controls for geomap."),b("#geomapId_"+t.id.replace("hide-controls","")).children(".mapboxgl-control-container").children(".mapboxgl-ctrl-top-right").hide()})}function d(e,t,a,n){var r,o,i,l=t.id,s=(t=b(t)).data();s.markerLong&&s.markerLat&&(o=s.markerHeight||50,i=s.markerRadius||10,r={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-o],"bottom-left":[r=s.markerOffset||25,-1*(o-i+r)],"bottom-right":[-r,-1*(o-i+r)],left:[i,-1*(o-i)],right:[-i,-1*(o-i)]},o=t.html().trim(),t.empty(),i=s.markerPos||new mapboxgl.LngLat(s.markerLong,s.markerLat),(t=new mapboxgl.Marker({color:s.markerColor||"#253276"})).getElement().id=l+"_marker",t.getElement().map=e,b(t.getElement()).data("sourceid",""+l),t.setLngLat(i).addTo(e),s.markerTitle||o)&&((l=new mapboxgl.Popup({offset:r,className:"js-geomap-popup"})).setLngLat(i).addTo(e),s.markerTitle?l.setText(s.markerTitle):l.setHTML(o),t.setPopup(l).togglePopup())}function v(e){var t,a,n,r,o=b(u.tplPopup),i=b("ul",o),l=b("li",o).first().detach(),s=e.features[0].properties;if(1<e.features.length&&e.target.zoomTo(e.target.getZoom()+1),t=void 0!==s.title&&""!==s.title?s.title:s.name||"",a=void 0!==s.description&&""!==s.description?s.description:s.text||"",n=void 0!==s.href&&""!==s.href?s.href:s.url||"",void 0!==s.links&&"string"==typeof(r=s.links)&&(r=JSON.parse(r)),n)b("[data-tpl-href]",o).each(function(){!n||a&&a.match(/Mehr.../i)?b(this).remove():b(this).attr("href",n)});else if(b.isArray(r)&&r.length&&l.length){i.empty();for(var d of r){var c=l.clone().map((e,t)=>(b(t).find("a").attr("href",d.url||"#").attr("title",d.title).attr("aria-label",d.title).text(d.title),t));console.log(c),i.append(c)}}else i.remove();b("[data-tpl-text]",o).each(function(){a?(console.log("text: "+a),b(this).html(a)):b(this).remove()}),b("[data-tpl-title]",o).each(function(){t?(console.log("title: "+t),b(this).text(t)):b(this).remove()}),console.log("TPL: "+o.text),console.log(o),(new mapboxgl.Popup).setLngLat(e.lngLat).setHTML(o.html()).addTo(e.target),this.flyTo({center:e.lngLat})}function i(){for(var e of document.getElementsByClassName("mapboxgl-popup"))e.remove()}var u={styleUrl:"https://basemap.berlin.de/gdz_basemapde_vektor/styles/bm_web_col.json",defaultImage:document.location.protocol+"//"+document.location.hostname+"/i9f/v4/css/images/osm-marker.png",defaultZoom:14,tplPopup:`<div class="geomap-popup-teaser float" style="width:300px;">
                        <h3 data-tpl-title=""></h3>
                        <div class="block body">
                            <div data-tpl-text=""></div>
                            <ul style="margin-bottom: 0">
                                <li class="list-item-style">
                                    <a href="" data-tpl-href="">mehr</a>
                                </li>
                            </ul>
                        </div>
                    </div>`},c=["#2020ff","#2f4f4f","#106410","#8b4513","#696969","#32cd32","#cd5c5c","#ff2020"],y={},m={de:{},en:{},fr:{},it:{}},p=function(o,t,e,i){try{if("string"==typeof t)t=JSON.parse(t);else if("object"!=typeof t||!t.type)return Promise.reject("Unable to parse GeoJSON; this might prevent some markers or custom icons from loading. Failing data: "+t)}catch(e){return Promise.reject("Unable to parse GeoJSON; this might prevent some markers or custom icons from loading. Failing data: "+t)}var a,n=[];for(a of t.features)if(a&&a.properties&&a.properties.icon&&h(a.properties.icon)){let r=a.properties.id,e=a.properties.icon;e="string"==typeof e&&e.replace("stg.berlin.de","ortedb-stage-imgproxy.dev.kube11.berlinonline.net"),n.push(new Promise((a,n)=>{o.loadImage(e,(e,t)=>e?(console.warn("Unable to load image from",i),n(e)):(o.hasImage(r)||(o.addImage(r,t),o.iconLoaded[r]=t),a(t)))}))}return Promise.all(n).catch(e=>console.warn('Some icons for "'+i+'" might be missing.'))},$=(e,t)=>e+t,h=e=>"string"==typeof e&&(e.startsWith("http")||e.startsWith("/"));return{init_map:function(t){var e,a,n,r,o=b("html").attr("lang"),i=(o=o in m==!1?"de":o,t.id),o=b(".js-geomap.geomap-map",t),l=o.data();if(l.markerLong&&l.markerLat)return e=o.hasClass("interactive-map"),l.markerStatic&&(e=!1),o.text(""),o.empty(),a=BO_geomap_mapboxtoken(),n=new mapboxgl.LngLat(l.markerLong,l.markerLat),(r=new mapboxgl.Map({container:o[0],style:u.styleUrl,interactive:e,center:n,zoom:"auto"==l.mapZoom?u.defaultZoom:l.mapZoom,attributionControl:!1,transformRequest:function(e,t){if("Tile"===t&&0===e.indexOf("https://maps"))return{url:e+"?token="+a,headers:{Referer:location.href}}}})).iconLoaded={},r.strokeNo=0,r.strokes=c,r.addControl(new mapboxgl.AttributionControl({compact:!1==!!l.attributionCompact})),e&&(r.addControl(new mapboxgl.NavigationControl({showZoom:!1==!!l.hideZoom,showCompass:!1==!!l.hideCompass}),"top-left"),!1==!!l.controlScale&&r.addControl(new mapboxgl.ScaleControl({maxWidth:l.scaleMaxWidth||100,unit:"metric"}),"bottom-left"),r.doubleClickZoom.enable(),r.touchZoomRotate.enable(),r.keyboard.enable(),r.dragRotate.enable(),r.boxZoom.enable(),"ontouchstart"in document.documentElement&&/Mobi|Android/i.test(navigator.userAgent)?r.dragPan.disable():r.dragPan.enable(),r.scrollZoom.disable(),!0==!!l.allowFullscreen&&r.addControl(new mapboxgl.FullscreenControl,"bottom-right"),!0==!!l.allowGeolocate)&&r.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showUserLocation:!0,trackUserLocation:!0==!!l.trackUserLocation}),"top-right"),r.on("style.load",function(e){r.loadImage(u.defaultImage,function(e,t){if(e)throw e;try{r.addImage("bomarker",t),r.iconLoaded.bomarker=t}catch(e){console.log("Unable to get fallback image",e)}}),r.on("load",function(){b(".js-geomap.geomap-marker",t).each(function(e,t){d(r,t)}),b(".js-geomap.geomap-layer",t).each(function(e,t){s(r,t,i,e)})})}),r.on("error",e=>{}),r.on("styleimagemissing",e=>{}),r;console.log("Map center coordinate missing. Cannot initialize map.")},add_marker:d,add_layer:s,load_layer:function(t,a,e,n,r){if(!a)return console.error('Unable to load layer "'+n+'"');if("string"==typeof a){if(["FooExcludedString","PolygonExcludedGeotype"].some(e=>a.includes(e)))return console.error('Unable to load unsupported GeoJSON for "'+n+'". Please, contact the administrator.'),!1;try{a=JSON.parse(a)}catch(e){}}function o(){var e=Math.round,t=Math.random;return"rgba("+e(128*t())+","+e(128*t())+","+e(128*t())+","+t().toFixed(1)+")"}var i,l,s,d,c=t,u=a,m=e,p=n,h=e=>e.replace("#","").split(/(..)/).filter(e=>e).map(e=>parseInt(e,16));if("object"==typeof u&&("FeatureCollection"===u.type&&(i=u.features,b.isArray(i))&&0<i.length)){d=c.strokeNo<c.strokes.length?c.strokes[c.strokeNo]:o(),c.strokeNo++;for(var f=0;f<i.length;f++){function g(e,t,a,n){if(e){var r=!1,o=h(n);if(s=t.properties,"GeometryCollection"===e.type)for(var i=0;i<e.geometries.length;i++)g(e.geometries[i],t,a,n);else"LineString"!==e.type&&"MultiLineString"!==e.type||(s["stroke-color"]=s["stroke-color"]||n,s["stroke-width"]=3,r=!0),"Polygon"!==e.type&&"MultiPolygon"!==e.type||(s["fill-color"]=s["fill-color"]||`rgba(${o.join(",")}, 0.2)`,s["fill-outline-color"]=n,r=!0);r&&(y[a]=t.properties["fill-color"]||t.properties["stroke-color"]||n)}}i[f]&&((l=i[f]).properties=l.properties||{},g(l.geometry,l,$(m,p),d),l.properties.name=l.properties.name||p)}}BO.geomap_osm_menu.addControlTo(t),console.log('addSource "'+e+'_clustered"'),t.addSource(e+"_clustered",{type:"geojson",data:a,clusterRadius:40,clusterMaxZoom:14}),console.log('addSource "'+e+'"'),t.addSource(e,{type:"geojson",data:a,cluster:!1});u=e;console.log('addLayer "'+e+'_linestring"'),t.addLayerToGroup(u,{id:e+"_linestring",type:"line",source:e,filter:["==","$type","LineString"],layout:{"line-cap":"butt",visibility:"visible"},paint:{"line-opacity":1,"line-color":{type:"identity",property:"stroke-color"},"line-width":{type:"identity",property:"stroke-width"}}}),console.log('addLayer "'+e+'_polygon"'),t.addLayerToGroup(u,{id:e+"_polygon",type:"fill",source:e,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-antialias":!0,"fill-outline-color":{type:"identity",property:"fill-outline-color"},"fill-color":{type:"identity",property:"fill-color"},"fill-opacity":{type:"identity",property:"fill-opacity"}}}),console.log('addLayer "'+e+'" von source '+e+"_clustered"),t.addLayerToGroup(u,{id:e,type:"symbol",source:e+"_clustered",filter:["all",["==","$type","Point"],["!has","point_count"]],minzoom:9,layout:{"icon-image":["case",["has","icon"],["coalesce",["image",["get","id"]]],["image","bomarker"]],"icon-allow-overlap":!0,"icon-size":1,"icon-offset":[4,4],"symbol-spacing":10,visibility:"visible"},paint:{"icon-color":"#253276","icon-opacity":.9}}),console.log('addLayer "'+e+'_clustercount" von source '+e+"_clustered"),t.addLayerToGroup(u,{id:e+"_clustercount",type:"symbol",source:e+"_clustered",filter:["all",["==","$type","Point"],["has","point_count"]],minzoom:8,layout:{"icon-image":"bomarker","icon-allow-overlap":!0,"icon-ignore-placement":!0,"text-allow-overlap":!0,"text-ignore-placement":!0,"icon-size":1,"icon-offset":[4,4],"symbol-spacing":10,"text-field":"{point_count_abbreviated}","text-size":24,visibility:"visible"},paint:{"icon-color":"#253276","icon-opacity":.4}}),t.on("click",e,v.bind(t)).on("mouseenter",e,function(e){t.getCanvas().style.cursor="pointer"}).on("mouseleave",e,function(e){t.getCanvas().style.cursor=""}),new mapboxgl.LngLatBounds;t.on("click",e+"_clustercount",function(e){console.log(e);var t=this.getZoom()+1;this.setCenter(e.lngLat),this.setZoom(t-.5),this.flyTo({speed:.1,zoom:t})}).on("mouseenter",e,function(e){t.getCanvas().style.cursor="pointer"}).on("mouseleave",e,function(e){t.getCanvas().style.cursor=""}),"function"==typeof t.hasLayerMenuControl&&t.hasLayerMenuControl()&&(c=$(e,n),t.getLayerMenuControl().addItem(t,u,n,r,y[c]))},show_popup:v,clear_popups:i,show_marker:function(e,t){var a=b("#"+e+"_"+t).data(),e=b("#"+e+"_"+t+"_marker")[0],t=e.map,n=t.getZoom()+1;16<n&&(n=16);t.fire("click",{type:"click",target:e,originalEvent:{target:e}},{latLng:[a.markerLat,a.markerLong]});e=new mapboxgl.LngLat(a.markerLong,a.markerLat);t.setCenter(e),t.setZoom(n-.5),t.flyTo({speed:.1,zoom:n})},show_marker_at:function(e,t,a){i();var n=u.defaultZoom,r=b("#map_"+e+" .geomap-mode-osm").get(0).geomap_osm,o=new mapboxgl.LngLat(t,a);r.setCenter(o),r.setZoom(n-.5),r.flyTo({speed:1,zoom:n}),setTimeout(()=>r.fire("click",{lngLat:o,point:r.project(o),originalEvent:{}}),500)}}}(jQuery),BO.mediaelement=BO.medialement||{},BO.init.mediaelement=function(e){void 0!==window.mejs&&(window.mejs.i18n.getLanguage=function(){return"de"},BO.mediaelement.initBase()),BO.mediaelement.init(),BO.mediaelement.loadExternal()},BO.mediaelement=function(){function t(e){var t,a="script_"+e.replace(/[^A-Za-z0-9]/g,"_");jQuery("#"+a).length||(t=document.createElement("script"),e=(/\/template\//.test(document.location)?"./":"/i9f/v4/")+e,t.id=a,t.src=e,document.head.appendChild(t))}var e=[],r={lang:"de",vimeo:!1,youtube:!1},a=$("html").attr("lang")||"de",n={loop:!1,enableAutosize:!0,alwaysShowControls:!0,clickToPlayPause:!0,features:["playpause","current","progress","duration","tracks","volume","speed","fullscreen","a11y"],hideCaptionsButtonWhenEmpty:!0,jumpForwardInterval:10,speeds:["1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x",speedText:"Speed Rate",startLanguage:"de",tracksAriaLive:!0,enableKeyboard:!0,pauseOtherPlayers:!0,usePluginFullScreen:!1,youtubeIframeVars:{nocookie:!0,hl:r.lang,controls:2,rel:0,cc_load_policy:1,iv_load_policy:1},youtube:{nocookie:!0,hl:r.lang,controls:2,rel:0,cc_load_policy:1,iv_load_policy:1}};return{initBase:function(){jQuery.extend(window.mejs.MepDefaults,n)},init:function(){void 0!==$.fn.mediaelementplayer&&(a&&/de|ru|en/.test(a)&&(r.lang=a),r.lang&&(t("vendor/mediaelement/lang/"+r.lang+".js"),mejs.i18n.language(r.lang)),mejs.Renderers.renderers.native_flv.options.flv.path="/i9f/v4/vendor/mediaelement/renderers/flv.js",$("video").each(function(e,t){var a=jQuery.extend({},window.mejs.MepDefaults,{success:function(e,t){$("#"+t.id+"-mode").attr("title","play mode: "+e.pluginType)}}),n=($(t).attr("style"),$(t).find("source").attr("type")),n=(/youtube/.test(n),/vimeo/.test(n)&&(r.vimeo=!0),$.extend(!0,{},a,$(t).data("mediaplayer")));$(t).mediaelementplayer("player_"+$(t)[0].id,n)}),$("audio").mediaelementplayer({enableKeyboard:!0,pauseOtherPlayers:!0,success:function(e,t){$("#"+t.id+"-mode").attr("title","play mode: "+e.pluginType)}}),r.vimeo)&&e.push("vendor/mediaelement/renderers/vimeo.js")},loadExternalSingle:t,loadExternal:function(){e.forEach(function(e){t(e)})},video_accept:function(e){var t=$("#video_"+e),a=t.data("markup"),t=(t.html(a),BO.mediaelement.init(),BO.mediaelement.loadExternal(),jQuery("mediaelementwrapper#player_"+e));t.length&&(t[0].findTracks(),t[0].loadTrack(0),t[0].play())}}}(),"function"==typeof window.addEventListener&&window.addEventListener("message",function(e){if("number"==typeof e.data)for(var t=document.getElementsByTagName("iframe"),a=0;a<t.length;a++)t[a].contentWindow===e.source&&(t[a].scrolling="no",t[a].style.overflow="hidden",t[a].style.height=e.data+"px",t[a].height=e.data)}),BO.iframeelement=BO.iframeelement||{},BO.iframeelement={iframe_accept:function(e){var e=$("#iframe"+e),t=e.data("markup");e.removeClass("accept_iframe"),e.html(t)}},BO.init.video=function(e){e(".item_video").each(function(e,t){BO.video.showControls(t)}),BO.video.resizeAcceptLayer("accept_video"),BO.video.resizeAcceptLayer("accept_video_padding"),e(window).resize(function(){BO.video.resizeAcceptLayer("accept_video"),BO.video.resizeAcceptLayer("accept_video_padding")})},BO.video=(jQuery,{showControls:function(e){e=jQuery(e)[0],0!=jQuery(e).children(".mi_video_control").length&&(jQuery(e).hasClass("item_html5video")?alert("html5 video mediaelements"):jQuery(e).hasClass("item_mi5video")&&alert("wahrscheinlich movingimage Video"))},resizeAcceptLayer:function(a){$("."+a).each(function(e,t){$(t).hasClass(a+"_small"),0==$(t).hasClass("default")&&($(window).width()<540?$(t).addClass(a+"_small"):$(t).removeClass(a+"_small"))})},miplay:function(e,t){var a;e&&(a={success:function(e){e.play()},parameters:{configType:"vmpro",playerId:"1vbZCF6fMpezmkhZVJUtHX",videoId:e.replace("MI","").replace(t,""),apiUrl:"//d.video-cdn.net/play",flashPath:"//e.video-cdn.net/v2/",token:"***"}});try{VideoPlayer.Collection.addPlayerById(e,a)}catch(e){console.log(e)}}}),BO.init.portalteaser=function(i){i(".template-land_portal .span10 .body .row").each(function(e,t){var a,n=i(t).find(".header"),r=0,o=0;i.each(n,function(e,t){o=i(t).height(),a=Number(o)+Number(6),r=r<a?a:r}),i.each(n,function(e,t){i(t).css("height",r)}),n=i(t).find(".span2 .caption"),o=r=0,i.each(n,function(e,t){o=i(t).height(),r=r<o?o:r}),i.each(n,function(e,t){i(t).css("height",r)}),n=i(t).find(".span5 .type-portalstandart .caption"),o=r=0,i.each(n,function(e,t){o=i(t).height(),r=r<o?o:r}),i.each(n,function(e,t){i(t).css("height",r)})})},BO.init.mejs_focus=function(a){a(".mejs-controls .mejs-button button").each(function(e,t){a(t).on("click",function(e){a(this).blur()})})},BO.init.formbreaker=function(l){if(0<l.find(".formpagebreak").length)for(var a,e,s=l.find("fieldset"),n=[],r=[],o=[],i=0,d=0,t=(n.push(0),l.each(s,function(e,t){1==i&&l(t).addClass("hidden"),l(t).hasClass("formpagebreak")&&(a=l(t).attr("id").replace(/pagebreak/g,""),o.push(a),n.push(e+1),1<o.length&&r.push(e),i=1),d=e}),r.push(d),0);e=o.length,0==t?c("#back"+o[t],n[e-1],r[e-1],"move"):c("#back"+o[t],n[t-1],r[t-1]),c("#forth"+o[t],n[t],r[t]),++t<o.length;);function c(e,o,i,t){e=l(e);e.bind("click",function(){for(var e,t=o,a=i,n=!0,r=t;r<=a;r++)e=l(s[r]).attr("id"),l(s[r]).hasClass("hidden")||formValidate.validate(document.getElementById(e))||(n=!1);if(0!=n)for(r=t;r<=a;r++)l(s[r]).toggleClass("hidden")}),"move"==t&&l(".form_submitbutton").before(e)}},BO.init.formcounter=function(e){BO.init.translate(e),e(".maxchars").each(function(){BO.formcounter({Element:this}).showStatus()})},BO.formcounter=function(a,e){return(a=a||{}).statusnode='<span class="formcharquota-status" style="display:block;text-align:right"></span>',a.Status?a.Status=jQuery(a.Status):(a.Status=jQuery(a.statusnode),jQuery(a.Element).after(a.Status)),a.max=jQuery(a.Element).attr("maxlength"),a.showStatus=function(){var e=a.Element.value.length,t=e;a.max=jQuery(a.Element).attr("maxlength"),a.max&&(t+="/"+a.max),t+=" "+BO.translate.translate("Zeichen"),a.Status.text(t),e>a.max?a.Status.attr("style","display:block;text-align:right;background-color:grey;padding-right:3px;color:red"):a.Status.attr("style","display:block;text-align:right;background-color:grey;padding-right:3px;color:white"),a.Status.text(t)},jQuery(a.Element).on("keyup click focus",a.showStatus),a},BO.init.formresults=function(e){e(".form_resultcontainer").each(function(e,t){formSummary.showdata(t)})},BO.init.formtimer=function(a){var n,r;0<a("#formtimervalue").length&&(n=a("#formtimervalue").val(),n*=60,a("fieldset").last().after('<div id="formtimerinfo" class="alert alert-warning hidden">In 20 Sekunden ist die Zeit zum Ausfüllen des Formulars abgelaufen.<br/>Wenn Sie auf den Absenden-Button drücken und die Zusammenfassung bestätigen, wird Ihr Formular aus Sicherheitsgründen nicht sofort abgeschickt.<br/>Bitte überprüfen Sie sämtliche Angaben, insbesondere Angaben zu hochgeladenen Dateien.<br/>Wenn Sie dann den Absenden-Button betätigen, wird das Formular versendet.</div>'),a("fieldset").first().before('<div id="formtimermessage" class="alert alert-error hidden">Ihre Angaben konnten noch nicht übermittelt werden, da die Zeit zum Ausfüllen des Formulars überschritten wurde.<br/>Bitte fügen Sie ggf. erneut Ihre Dateien hinzu.<br/>Anschließend klicken Sie nochmals auf Absenden, vielen Dank.</div><p class="formtimer">Sie haben noch&nbsp;<i class="icon-time"></i>&nbsp;<strong><span class="formtimershow"></span></strong>&nbsp;Minuten Zeit um dieses Formular auszuf&uuml;llen.</p>'),r=window.setInterval(function(){var e,t;0<=n?(e=(e=Math.floor(n/60))<10?"0"+e:e,t=(t=n%60)<10?"0"+t:t,a(".formtimershow").text(e+":"+t),0==e&&20==t&&a("#formtimerinfo").removeClass("hidden"),n--):window.clearInterval(r)},1e3)),0<a("#formtimermessageon").length&&a("#formtimermessage").removeClass("hidden")},BO.init.simplesearch=function(n){n(".simplesearch-index .btn-addtocart, .simplesearch-detail .btn-addtocart").on("click",function(e){return BO.simplesearch.cartAddItem(e,!0)}),n(".simplesearch-warenkorb .btn-delcart").on("click",function(e){return BO.simplesearch.cartDelItem(e)}),n(".simplesearch-warenkorb .btn-itemcart").each(function(e){var t=n(this).attr("href"),t=n(this).find("label").attr("data-href",t).addClass("btn-itemcart"),a=n(this)[0].className.match(/ cart-max-([0-9]*)/),a=(null!=a&&n(t).attr("data-max",a[1]),n(this).replaceWith(n(t)),n('<a class="btn-delcart" title="Eintrag aktualisieren" href="#" onclick="return false;"><i class="fa fa-refresh"></i>Aktualisieren</a>'));n(t).after(n(a))}),n(".simplesearch-warenkorb .btn-itemcart input").on("change",function(e){return BO.simplesearch.cartSetItem(e)}).on("click",function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1})},BO.simplesearch=(jQuery,{cartShowCurrent:function(e){e.stopImmediatePropagation();e=e.target;alert("Show Cart "+e.id)},cartShowMessage:function(e,t,a){var n=t.item,n=0<n&&void 0!==t.index[n]?t.index[n]:0,r="<p>Status: "+t.messages.messages.join(", ")+"</p>",e=($(e).find("h3").length?r="<p>Eintrag &quot;"+$(e).find("h3").text()+"&quot; nun im Warenkorb. ("+n+")</p>":$(e).find("h4").length&&(r="<p>Eintrag &quot;"+$(e).find("h4").text()+"&quot; nun im Warenkorb. ("+n+")</p>"),$("div.alert"));0==e.length&&(e=$('<div class="alert"></div>')),e=$(e).detach(),$(e).attr("class","alert").addClass("alert-"+(t.messages.success?"success":"error")).html(r).prependTo($(a))},cartAddItem:function(e,n){e.stopImmediatePropagation();var t,r=e.target;if("A"==r.nodeName)t=r.href;else{if("LABEL"!=r.nodeName)return!1;t=$(r).attr("data-href")}return $.ajax({type:"GET",url:t,dataType:"json",withCredentials:!0,xhrFields:{withCredentials:!0},success:function(e){var t,a;void 0!==e.messages&&e.messages.success&&(n?((t=$(r).parents(".cartitem")).find(".btn-addtocart").addClass("is-added"),$(".simplesearch-index #results").length||$(t),a=parseInt(e.index[e.item],10),t.find("span.inner").text(a),$(r.parentNode).addClass("alert").addClass("alert-success"),setTimeout(function(){$(r.parentNode).removeClass("alert-success").removeClass("alert")},4e3)):(inp=$(r).find("input")[0],$(inp).val(parseInt($(inp).val(),10)+1))),void 0!==e.results&&$(".btn-tocart span.inner").text(+e.results.count)},error:function(e){alert("Error: Cannot add element!")}}),!1},cartSetItem:function(e){e.stopImmediatePropagation();var t,a=e.target;if("A"==a.parentNode.nodeName)t=a.parentNode.href;else{if("LABEL"!=a.parentNode.nodeName)return!1;t=$(a.parentNode).attr("data-href")}var e=parseInt(a.value,10),n=parseInt($(a.parentNode).attr("data-max"),10);return void 0!==n&&0<n&&n<e&&(a.value=n,alert("Die gewählte Anzahl übersteigt die maximale Bestellmenge. Es können maximal "+n+" Exemplare bestellt werden."),e=n),$.ajax({type:"GET",url:t.replace("add=add","set="+e),dataType:"json",withCredentials:!0,xhrFields:{withCredentials:!0},success:function(e){void 0!==e.messages&&e.messages.success&&($(a).parents(".cartitem"),$(".simplesearch-searchresult"),$(a).addClass("alert").addClass("alert-success"),setTimeout(function(){$(a).removeClass("alert-success").removeClass("alert")},4e3)),void 0!==e.results&&$(".btn-tocart span.inner").text(+e.results.count)},error:function(e){alert("Error: Cannot set element!")}}),!1},cartDelItem:function(e){e.stopImmediatePropagation();var r=e.target;return $.ajax({type:"GET",url:r.href,dataType:"json",withCredentials:!0,xhrFields:{withCredentials:!0},success:function(e){var t,a,n;void 0!==e.messages&&(0==(t=$("div.alert")).length&&(t=$('<div class="alert"></div>')),t=$(t).detach(),n="<p>Status: "+e.messages.messages.join(", ")+"</p>",e.messages.success?(a=$(r).parents(".cartrow"),n="<p>Eintrag &quot;"+$(a).find("h3").text()+"&quot; gelöscht.</p>",$(a).remove()):$(t).attr("class","alert").addClass("alert-"+(e.messages.success?"success":"error")).html(n).prependTo($(".simplesearch-warenkorb"))),void 0!==e.results&&$("span.cart-items-count").text(+e.results.count)},error:function(e){alert("Error: Cannot delete element!")}}),!1}}),BO.init.reklame=function(e){},BO.toggler=BO.toggler||{},BO.init.toggler=function(a){a(".land-toggler").each(function(e){var t=a(this);a(".toggler-button-inner",this).click(function(){a(".land-toggler-button",t).addClass("collapsed")})}),a("[id^=btn-download]").each(function(e,t){a(t).attr("tabindex","-1")})},BO.toggler={makeAccessible:function(e,t,a,n,r,o){var i=("download"!=o&&"download-close"!=o?$("#toggler_"+e):$("#"+e)).hasClass("collapsed");i?("faq"==o&&($("#toggler_"+e).attr("aria-label",a),$("#toggler_"+e).attr("title",r),$("#"+e).focus()),"geo"==o&&($("#toggler_"+e).attr("aria-label",a),$("#toggler_"+e).attr("title",r),$("#collapse-"+e).focus()),"form"==o&&($("#toggler_"+e).attr("aria-label",r),$("#toggler_"+e).attr("title",a),$("#toggler_"+e).html(a),$("#toggler_"+e).focus(),$("#accordionbody"+e).attr("tabindex","0")),"download"==o&&($("#"+e).attr("aria-label",a),$("#"+e).attr("title",r),$("[id^="+o+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","0")}),$("[id^=btn-"+o+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","0")}),$("[id^=link-close"+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","0")}))):("faq"!=o&&"geo"!=o||($("#toggler_"+e).attr("aria-label",t),$("#toggler_"+e).attr("title",n),$("#toggler_"+e).focus()),"form"==o&&($("#toggler_"+e).attr("aria-label",n),$("#toggler_"+e).attr("title",t),$("#toggler_"+e).html(t),$("#toggler_"+e).focus(),$("#accordionbody"+e).attr("tabindex","-1")),"download"==o&&($("#"+e).attr("aria-label",n),$("#"+e).attr("title",t),$("#"+e).focus(),$("[id^="+o+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","-1")}),$("[id^=btn-"+o+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","-1")}),$("[id^=link-close"+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","-1")})),"download-close"==o&&($("#"+e).addClass("collapsed"),$("#"+e).attr("aria-label",r),$("#"+e).attr("title",a),$("#"+e).focus(),$("[id^=download"+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","-1")}),$("[id^=btn-download"+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","-1")}),$("[id^=link-close"+e.replace("modul_headline","")+"]").each(function(e,t){$(t).attr("tabindex","-1")})))}};
/* ==========================================================
 * bootstrap-carousel.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#carousel
 * ==========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */


!function ($) {

  "use strict"; // jshint ;_;


 /* CAROUSEL CLASS DEFINITION
  * ========================= */

  var Carousel = function (element, options) {
    this.$element = $(element)
    this.$indicators = this.$element.find('.carousel-indicators')
    this.options = options
    this.options.pause == 'hover' && this.$element
      .on('mouseenter', $.proxy(this.pause, this))
      .on('mouseleave', $.proxy(this.cycle, this))
  }

  Carousel.prototype = {

    cycle: function (e) {
      if (!e) this.paused = false
      if (this.interval) clearInterval(this.interval);
      this.options.interval
        && !this.paused
        && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))
      return this
    }

  , getActiveIndex: function () {
      this.$active = this.$element.find('.item.active')
      this.$items = this.$active.parent().children()
      return this.$items.index(this.$active)
    }

  , to: function (pos) {
      var activeIndex = this.getActiveIndex()
        , that = this

      if (pos > (this.$items.length - 1) || pos < 0) return

      if (this.sliding) {
        return this.$element.one('slid', function () {
          that.to(pos)
        })
      }

      if (activeIndex == pos) {
        return this.pause().cycle()
      }

      return this.slide(pos > activeIndex ? 'next' : 'prev', $(this.$items[pos]))
    }

  , pause: function (e) {
      if (!e) this.paused = true
      if (this.$element.find('.next, .prev').length && $.support.transition.end) {
        this.$element.trigger($.support.transition.end)
        this.cycle(true)
      }
      clearInterval(this.interval)
      this.interval = null
      return this
    }

  , next: function () {
      if (this.sliding) return
      return this.slide('next')
    }

  , prev: function () {
      if (this.sliding) return
      return this.slide('prev')
    }

  , slide: function (type, next) {
      var $active = this.$element.find('.item.active')
        , $next = next || $active[type]()
        , isCycling = this.interval
        , direction = type == 'next' ? 'left' : 'right'
        , fallback  = type == 'next' ? 'first' : 'last'
        , that = this
        , e

      this.sliding = true

      isCycling && this.pause()

      $next = $next.length ? $next : this.$element.find('.item')[fallback]()

      e = $.Event('slide', {
        relatedTarget: $next[0]
      , direction: direction
      })

      if ($next.hasClass('active')) return

      if (this.$indicators.length) {
        this.$indicators.find('.active').removeClass('active')
        this.$element.one('slid', function () {
          var $nextIndicator = $(that.$indicators.children()[that.getActiveIndex()])
          $nextIndicator && $nextIndicator.addClass('active')
        })
      }

      if ($.support.transition && this.$element.hasClass('slide')) {
        this.$element.trigger(e)
        if (e.isDefaultPrevented()) return
        $next.addClass(type)
        $next[0].offsetWidth // force reflow
        $active.addClass(direction)
        $next.addClass(direction)
        this.$element.one($.support.transition.end, function () {
          $next.removeClass([type, direction].join(' ')).addClass('active')
          $active.removeClass(['active', direction].join(' '))
          that.sliding = false
          setTimeout(function () { that.$element.trigger('slid') }, 0)
        })
      } else {
        this.$element.trigger(e)
        if (e.isDefaultPrevented()) return
        $active.removeClass('active')
        $next.addClass('active')
        this.sliding = false
        this.$element.trigger('slid')
      }

      isCycling && this.cycle()

      return this
    }

  }


 /* CAROUSEL PLUGIN DEFINITION
  * ========================== */

  var old = $.fn.carousel

  $.fn.carousel = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('carousel')
        , options = $.extend({}, $.fn.carousel.defaults, typeof option == 'object' && option)
        , action = typeof option == 'string' ? option : options.slide
      if (!data) $this.data('carousel', (data = new Carousel(this, options)))
      if (typeof option == 'number') data.to(option)
      else if (action) data[action]()
      else if (options.interval) data.pause().cycle()
    })
  }

  $.fn.carousel.defaults = {
    interval: 5000
  , pause: 'hover'
  }

  $.fn.carousel.Constructor = Carousel


 /* CAROUSEL NO CONFLICT
  * ==================== */

  $.fn.carousel.noConflict = function () {
    $.fn.carousel = old
    return this
  }

 /* CAROUSEL DATA-API
  * ================= */

  $(document).on('click.carousel.data-api', '[data-slide], [data-slide-to]', function (e) {
    var $this = $(this), href
      , $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) //strip for ie7
      , options = $.extend({}, $target.data(), $this.data())
      , slideIndex

    $target.carousel(options)

    if (slideIndex = $this.attr('data-slide-to')) {
      $target.data('carousel').pause().to(slideIndex).cycle()
    }

    e.preventDefault()
  })

}(window.jQuery);
